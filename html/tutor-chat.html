<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Tutor - JurisAI</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/tutor-chat.css">
</head>
<body>
    <nav class="navbar">
        <div class="navbar-content">
            <div class="logo">JurisAI</div>
            <div class="nav-links">
                <a href="dashboard.html">Dashboard</a>
                <a href="answer-practice.html">Practice</a>
                <a href="tutor-chat.html" class="active">AI Tutor</a>
            </div>
            <div class="user-info">
                <span id="userCourse"></span>
                <span id="userSemester"></span>
            </div>
        </div>
    </nav>

    <div class="container">
        <aside class="sidebar">
            <div class="context-panel">
                <h3>Your Context</h3>
                <div class="context-item">
                    <span class="context-label">Course</span>
                    <span class="context-value" id="contextCourse">Loading...</span>
                </div>
                <div class="context-item">
                    <span class="context-label">Semester</span>
                    <span class="context-value" id="contextSemester">-</span>
                </div>
                <div class="context-item">
                    <span class="context-label">Practice Attempts</span>
                    <span class="context-value" id="contextAttempts">0</span>
                </div>
            </div>

            <div class="topics-panel">
                <h3>Focus Areas</h3>
                <div class="weak-topics" id="weakTopics">
                    <p class="empty-state">No weak topics identified</p>
                </div>
            </div>

            <div class="suggestions-panel">
                <h3>Try Asking</h3>
                <div class="suggestions-list" id="suggestionsList">
                    <div class="suggestion-skeleton"></div>
                    <div class="suggestion-skeleton"></div>
                    <div class="suggestion-skeleton"></div>
                </div>
            </div>
        </aside>

        <main class="chat-main">
            <div class="chat-header">
                <div class="tutor-avatar">
                    <span>AI</span>
                </div>
                <div class="tutor-info">
                    <h2>AI Law Tutor</h2>
                    <p>Exam-focused guidance for Indian law students</p>
                </div>
                <button class="btn-new-chat" onclick="startNewChat()">New Chat</button>
            </div>

            <div class="chat-messages" id="chatMessages">
                <div class="welcome-message">
                    <div class="welcome-icon">
                        <span>AI</span>
                    </div>
                    <h3>Welcome to your AI Law Tutor</h3>
                    <p>Ask questions about your syllabus topics. I will provide exam-oriented explanations based on your course and semester.</p>
                    <div class="welcome-rules">
                        <div class="rule">
                            <span class="rule-icon">+</span>
                            <span>Explain concepts, cases, and legal principles</span>
                        </div>
                        <div class="rule">
                            <span class="rule-icon">+</span>
                            <span>Clarify doubts and compare legal terms</span>
                        </div>
                        <div class="rule">
                            <span class="rule-icon">+</span>
                            <span>Guide you on answer writing structure</span>
                        </div>
                        <div class="rule negative">
                            <span class="rule-icon">-</span>
                            <span>No legal advice for personal situations</span>
                        </div>
                        <div class="rule negative">
                            <span class="rule-icon">-</span>
                            <span>No topics outside your syllabus</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="chat-input-container">
                <div class="input-wrapper">
                    <textarea 
                        id="chatInput" 
                        placeholder="Ask your question..."
                        rows="1"
                        maxlength="2000"
                    ></textarea>
                    <button class="btn-send" id="sendBtn" onclick="sendMessage()">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
                        </svg>
                    </button>
                </div>
                <div class="input-hint">
                    <span id="charCount">0</span>/2000 characters
                </div>
            </div>
        </main>

        <aside class="info-panel" id="infoPanel">
            <div class="panel-header">
                <h3>Response Info</h3>
                <button class="btn-close" onclick="closeInfoPanel()">&times;</button>
            </div>
            <div class="panel-content">
                <div class="info-section">
                    <h4>Intent Detected</h4>
                    <span class="intent-badge" id="intentBadge">-</span>
                </div>
                <div class="info-section">
                    <h4>Topic</h4>
                    <span id="topicInfo">-</span>
                </div>
                <div class="info-section">
                    <h4>Your Mastery</h4>
                    <span class="mastery-badge" id="masteryBadge">-</span>
                </div>
                <div class="info-section" id="suggestionsSection">
                    <h4>Suggestions</h4>
                    <ul id="responseSuggestions"></ul>
                </div>
                <div class="info-section" id="relatedSection">
                    <h4>Related Content</h4>
                    <ul id="relatedContent"></ul>
                </div>
            </div>
        </aside>
    </div>

    <div id="toast" class="toast"></div>

    <script src="../js/api.js"></script>
    <script src="../js/tutor-chat.js"></script>
</body>
</html>
